《体撰录》




体撰录


大衍说


天一、地二、天三、地四、天五、地六、天七、地八、天九、地十，列级堆垜，积五十有五。令诸数皆平方，于末层十之下际，距角作一横线，两角各作斜线，上引相遇于首层一之顶，则堆垜截爲圭形，其广十，正从亦十，以半广乘正从，得五十。此大衍之数所由生。


衍，古字多爲羡，《周官》有璧羡，又称以其馀爲羡。今以圭外数减堆垜数，馀五十，故曰大羡五十，不可再减已。然以列数乘方求差，则五十必穷，而四十九不穷。是何也？五十之半爲二十五，折半则中閒必空。自四十九逆数至一，其分脊之位亦值二十五，则二十五得爲中数。取二十五之前一数自乘，与后一数自乘，其差一百。递前后各二、三、四、五数自乘，其差亦递爲二百、三百、四百、五百。至前后各二十四数自乘，其差则爲二千四百。唯后二十五数值五十，前二十五数值无，以五十自乘求与之相较而差二千五百者，唯无之自乘耳。五十无对，则其用自穷。虽然，五十不可揜也，取二十五递前后诸数相并，无不爲五十者，唯五十无可与并，是以五十不自用，而用四十九也。非徒五十不自用，二十五亦不自用也。有二十五前后列数，故分爲二以象两。二十五不自乘，故挂一以象三欤？〈今作矩广袤各二十五，并之爲五十，其实矩祇四十九尔。则二十五独爲隅，而广袤各二十四者爲两廉矣，此亦其义。〉


二十五递前后各数自乘相差表


二十四自乘五百七十六。二十六自乘六百七十六。〈相差一百。〉


二十三自乘五百二十九。二十七自乘七百二十九。〈相差二百。〉


二十二自乘四百八十四。二十八自乘七百八十四。〈相差三百。〉


二十一自乘四百四十一。二十九自乘八百四十一。〈相差四百。〉


二十自乘四百。三十自乘九百。〈相差五百。〉


十九自乘三百六十一。　三十一自乘九百六十一。〈相差六百。〉


十八自乘三百二十四。　三十二自乘一千零二十四。〈相差七百。〉


十七自乘二百八十九。　三十三自乘一千零八十九。〈相差八百。〉


十六自乘二百五十六。　三十四自乘一千一百五十六。〈相差九百。〉


十五自乘二百二十五。　三十五自乘一千二百二十五。〈相差一千。〉


十四自乘一百九十六。　三十六自乘一千二百九十六。〈相差一千一百。〉


十三自乘一百六十九。　三十七自乘一千三百六十九。〈相差一千二百。〉


十二自乘一百四十四。　三十八自乘一千四百四十四。〈相差一千三百。〉


十一自乘一百二十一。　三十九自乘一千五百二十一。〈相差一千四百。〉


十自乘一百。　四十自乘一千六百。〈相差一千五百。〉


九自乘八十一。四十一自乘一千六百八十一。〈相差一千六百。〉


八自乘六十四。四十二自乘一千七百六十四。〈相差一千七百。〉


七自乘四十九。四十三自乘一千八百四十九。〈相差一千八百。〉


六自乘三十六。四十四自乘一千九百三十六。〈相差一千九百。〉


五自乘二十五。四十五自乘二千零二十五。〈相差二千。〉


四自乘一十六。四十六自乘二千一百一十六。〈相差二千一百。〉


三自乘九。四十七自乘二千二百零九。〈相差二千二百。〉


二自乘四。四十八自乘二千三百零四。〈相差二千三百。〉


一自乘一。四十九自乘二千四百零一。〈相差二千四百。〉


无自乘无。五十自乘二千五百。〈相差二千五百。〉


今絫取三数，则前后两数自乘之差，必爲中閒一数之四倍，絫取五数，则递前递后两数自乘之差，必爲中间一数之八倍，馀可类推也。然则絫而成奇者得有中数，絫而成耦者无是，是故五十不可用，而四十九可用。他数絫以成奇者，取其中位，则前后自乘之数悉有衰次。然唯以二十五爲中位者，前后相差，自一百、二百以至二千四百，皆整齐明画，不假筹策而知。是故四十九而下，一切絫成奇者，亦不用。独四十九便于用。


近代説大衍之数者二家:一、孔广森，谓大衍之数爲句股术，五十即句股弦三幂相和之数，四十九即句股和自乘之数，虚一不用，即句股较股弦较之数。然五十之数出于无因，且句股术者，但以句股两幂相和，开方适尽，则弦亦适尽。有句五、股十二、弦十三者，有句八、股十五、弦十七者，有句二十、股二十一、弦二十九者，有句九、股四十、弦四十一者，非定以句三、股四、弦五爲率也。二、焦循，谓衍即旁广，训诂亦近矣。而取秦九韶一、二、三、四互乘之説。然按其数，一乘二爲二，二乘三爲六，三乘四爲十二，四乘一爲四，四乘二爲八，则不足五十。而又阙三乘一之数，别出六乘四爲二十四，一乘十二爲十二，是即絫乘非互乘，其説亦支离矣。若昔儒京、马、荀、郑、虞、姚、王、崔之説，穿凿损补，弥不可依，故今别造新义，较之诸家，盖近自然也。


问曰：天地之数五十有五，所以成变化而行鬼神，其义可得闻乎？曰：行鬼神则吾不知，成变化乃可知矣。一加二爲三，三之平方九，中圅一、二诸立方。一、二加三爲六，六之平方三十六，中圅一、二、三诸立方。一、二、三加四爲十，十之平方一百，中圅一、二、三、四诸立方。一、二、三、四加五爲十五，十五之平方二百二十五，中圅一、二、三、四、五诸立方。一、二、三、四、五加六爲二十一，二十一之平方四百四十一，中圅一、二、三、四、五、六诸立方。一、二、三、四、五、六加七爲二十八，二十八之平方七百八十四，中圅一、二、三、四、五、六、七诸立方。一、二、三、四、五、六、七加八爲三十六，三十六之平方一千二百九十六，中圅一、二、三、四、五、六、七、八诸立方。一、二、三、四、五、六、七、八加九爲四十五，四十五之平方二千零二十五，中圅一、二、三、四、五、六、七、八、九诸立方。一、二、三、四、五、六、七、八、九加十爲五十五，五十五之平方三千零二十五，中圅一、二、三、四、五、六、七、八、九、十诸立方。率絫加至某数，以其积乘方，即圅加数之立方，自是以往，靡不准是。夫以堆垜数自乘爲平方，而平方即中圅立方，斯岂非变化之至者乎！知少广之术，可以开立方；知斯术也，可以开立方丛矣。〈又天数二十五，开平方得五。地数三十，开较一从方得袤六广五。凡奇数相絫者，开平方即絫次。耦数相絫者，开较一从方，其广即絫次。明《易》义兼堆垜、开方二术。


极数定象答问


问曰：《易&bull;繫》称:参五以变，错综其数，通其变遂成天下之文，极其数遂定天下之象。极数者何数，定象者何象邪？荅曰：既言参五，则必以三、五爲法矣。夫蓍之德圆，卦之德方。圆方，象也。数不极则象亦无以定。大衍之数五十，其用四十有九，此蓍数也。置四十九倍五十以乘之，又以四十九开方，以挂一减四十九乘之，两数相并，得五千二百三十六爲实，乃以三乘之，五除之，得三千一百四十一六，是爲圆径一千之周。其一术曰：置四十九开方，以挂一减四十九乘之，次以挂一加五十乘之，次以天地之数五十五乘之，得九十四万二千四百八十爲实，乃以三除之，得三十一万四千一百六十，是爲圆径十万之周。其一术曰：置四十九自乘，以挂一减之，以四十九开方乘之，次以挂一加五十乘之，次以天地之数五十五乘之，得四千七百十二万四千爲实，乃以三五递除之，得三百十四万一千六百，是爲圆径百万之周。是故三一四一六者，圆径一之周也。以五再乘其周，退二位得零七八五四者，圆径一之幂也。以倍三除其周，得零五二三六者，立圆径一之积也。乘除所得，数也。平圆立圆，象也。径午贯之，周外规之，文也。如是者爲极其数以定圆，六十四云、八云，此卦数也。以八自乘，则六十四爲平方。以四再自乘，则六十四爲立方。以二再自乘，则八爲立方。故一卦未有不爲立方者也。今以三乘五，以五乘三，各得十五，相和爲三之进位，以五除三之进位，得六，六鼈臑成一立方也。以三之进位除五，得零一六六不尽，一鼈臑之数也。鼈臑者，今日三角锥。邪解立方爲两堑堵，故立方一，则堑堵零五。邪解堑堵爲一阳马、一鼈臑，阳马于堑堵三之二，于立方三之一。鼈臑于堑堵三之一，于立方六之一。故立方一，则鼈臑零一六六不尽也。是故爻即鼈臑，三画之卦即堑堵，六画之卦即立方。一立方者，六鼈臑，故一卦得六爻。六十四立方者，三百八十四鼈臑，故六十四卦得三百八十四爻。爻之爲文，《説文》以爲象《易》六爻头交，今试邪解立方成两堑堵，此两堑堵者，一从右方上端邪解至左方下端，成一阳马、一鼈臑；一从左方下端邪解至右方上端，亦成一阳马、一鼈臑。以此复合爲立方，则两鼈臑之大弦必午贯相交焉，此爲六爻头交。和与乘除所得，数也。鼈臑立方，象也。大弦午贯，文也。且令六十四爲平方，三五和，即其边矣。三五相乘，即其两廉一隅矣。令六十四爲立方，三五较，以馀自乘，即其边矣。三自乘，即其平廉矣。五自倍，即其三长廉一隅矣。和较乘倍所得，数也。平方立方，象也。廉隅与方华离，文也。如是者爲极其数以定方，极之定之，未有不以三五裁制者，苟充其例，以平面方圆相圅三重，得外方圆幂而求内方圆幂，必以五退位再乘之。以立体方圆相圅三重，得外方圆积而求内方圆积，必以三、三除之。〈以三、三除，即二十七除。〉至哉，参五之法，可与探幽洞微矣。


问曰:六十四者，平方立方之幂积皆有之，今上经三十卦，下经三十四卦，其数不均，何也？荅曰：以三乘五、五乘三相和，是上经三十卦也。以三五各自乘相和，是下经三十四卦也。是参五之至变也。


问曰:卦见方数，蓍不见圆数，何也？荅曰：夫圆周四一三一六者，二八、二八、五六、五六连琐之所成尔。此四数约之皆七也。而四十九约之亦七也。置四十九，以四千四百八十八乘之，则爲圆周者七矣。然四十九不自圆，待与他数相乘而后圆，是以必错综之也。〈若用约率四十九开方，即圆径天地之数五十五。以二五除之，即圆周。四十九开方，以五十五退位乘之，即圆幂。四十九即同径之方幂。四十九开方，以乘四十九，即立方积。以十五除五十五，以乘四十九，即同径之立圆积。是亦待错综也。〉曰:今所据圆率者，刘徽密率也。于祖氏密率犹微赢，岂数有未极乎？曰：求祖氏率者，以三五递乘四十九，得七三五，就圆周末位，閒一位减之，即爲三一四一五九二六五矣。祖氏圆率亦以七约其数也。〈以四四八八乘七，即刘氏圆周。以四四八七九八九五乘七，即祖氏圆周。〉虽然，圆率未有至密者也。推圆周者，其位至于钜万而无穷，无穷则不可以定象，故知《易》之所论圆率，以三一四一六爲极。


附録


一百九十二觚割圆之术，盖亦不始刘徽。太史《酷吏传》云:破觚而爲圆。既引以爲喻，必曾有其事矣。〈《九章》径一周三之率，在《方田篇》。度田但取大齐，故不用割圆所得之率。〉虽然，觚直而弧曲，虽絫析至千万觚，与圆周差至极微，终不可以爲眞圆。若如是求之，爲功愈勤，其愚转甚矣。孔子曰：觚不觚，觚哉觚哉！盖古觞器皆同形，其爲觚也，不以六觚八觚爲式，析觚愈多，视之成圆，其实百千觚相櫕尔。〈旧説皆误，陈祥道直以觚爲八觚，由未知觞器皆圆，觚愈分析，合之转近圆也。〉刘徽谓觚之细者，与圆合体，是亦言其大齐则然。故屡析六觚，至一百九十二觚之幂，即以消息增加爲三一四一六，以是爲圆径二之幂，即爲圆径一之周，盖不欲竟以积觚爲圆也。徽尚欲求一千五百三十六觚之一面，得三千七十二觚之幂，裁其微分。裁其微分云者，亦不欲竟以积觚爲圆也。虽然，展转析觚，其数无穷，于圆终不能满，知其不满而增周泰过，即有刘歆、王蕃之侈。不增则促，故祖冲之特开盈朒二限以相磑𥖪。盈限即圆外切诸觚之数，朒限即圆内容诸觚之数，朒限以制其过损，盈限以制其过增，其术始精严矣。今以圆内容三千零七十二觚求之，得径一周三一四一五九二一有奇，以圆内容六千一百四十四觚求之，得径一周三一四一五九二五一有奇，若以圆内容一万二千二百八十八觚求之，得径一周三一四一五九二六一九有奇，是即祖氏所谓朒限也。复以圆外切一万二千二百八十八觚求之，得径一周三一四一五九二七二有奇，是即祖氏所谓盈限也。盈朒之閒，径一周三一四一五九二六五，则祖氏所谓正数也。其必取盈朒之閒者，不欲以外切内容诸觚爲圆也。〈析至圆内二万四千五百七十六觚，得径一周三一四一五九二六四五有奇。圆外二万四千五百七十六觚，得径一周三一四一五九二六七有奇。两相磑𥖪，正数亦在其閒。祖氏所谓盈朒限者，自指一万二千二百八十八觚言。然以后诸觚，必曾屡析，方能确定正数耳。〉


夫觚之不可爲直，外切内容诸觚爲圆周所界而不可以泯合，其势然也。清世割圆者，屡析六觚，至圆之外切内容各五百一十五亿三千九百六十万零七千五百五十二等边，两所得数，各四十位，其前九位，与祖氏圆周同，其次十位，亦自相同，则三一四一五九二六五三五八九七九三二三八是也。然其后二十一位，内外自有盈朒之数，以是观之，不得竟以积觚爲圆明矣。夫内容诸觚，转析而周转大；外切诸觚，转析而周转小，故前十九位得相似，而后二十一位终不相似。若更析之，则内外相盪，其同者又不止十九位也。然位数愈增，则不同者复在其后矣。今此十九位者，㐹然不可动已。自二十位以次，盈朒之閒，必有正数在焉。而説者遽谓可以混一，则独断之见也。其后杜德美以屡乘屡除求圆周，不假句股割圆而数自合，世人惊其瑰奇，以爲至当。然以其术推校，自二十位以次，倾于外切，是亦盈限而已矣。〈圆周盈朒之辨，在弟二十位，则作径须一万亿丈，方辨周中一忽二忽之较，是其径长爲地球径二十四万有馀，谁作此器，谁具此明者，故算数可较，而实事难譣也。如欲以尺度量取差数，须自氂始。依祖氏圆周九位，尚须作径一千丈，始得以一氂之差，辨其盈朒二限，是亦不能作也。唯刘、祖二家圆率之差，但须作径十四丈，其差已差较一氂，如或可就。然作器用木，则片片补苴，中多罅隙，铸金陶土，工虽至精，边际不能无小小坳突，磨鑢平之，则或多所甐伤，是以终不可譣也。然则算家求数，必应精密，若以定象制器，但依刘氏圆率足矣。〉


说周量


《攷工记》:栗氏爲量，深尺，内方尺，而圜其外，其实一鬴。按立方一尺，其积千寸，实一百万分，而容六斗四升，则一升居一万五千六百二十五分，十斗居一百五十六万二千五百分也。爲量者若衹求容鬴，方尺深尺已足，何爲圜其外？圜其外者，以容十斗之积也。以方尺之弦爲圜径，圜外所切大方，积二千寸，实二百万分，则圜积一千五百七十寸零八百分，实一百五十七万零八百分。以校十斗之量，盈八千三百分。若是者，何也？《攷工》所谓内方尺而圜其外，与《汉志》刘歆斛法有异。故虚设内方以定弦，此实有内方以容鬴，内方实有，则铜范所占分数，足以减圜积之盈矣。令内方厚二氂零七秒五忽，一面得二千零七十五分，四面得八千三百分，是则方范以内，空积一百万分，其容六斗四升；方范以外，圜范以内，空积五十六万二千五百分，其容三斗六升，合之爲十斗也。《汉志》刘歆所作铜斛，用《九章》程米法，以千六百二十寸容十斗，其率与《攷工》有异。虽依拟其法，亦云内方尺，衹爲设数，非实有其物。其圜径亦不竟用方弦，必有庣旁九氂五豪始足，此周汉斛制之殊也。


栗氏次言:其臀一寸，其实一豆。杜子春云:谓覆之其底深一寸也。按豆当爲斗，声之误尔。上方一尺深一尺而圜其外，则容十斗；下方一尺深一寸而圜其外，则容一斗。刘歆斛式，上爲斛，下爲斗，即依是作之也。次言:其耳三寸，其实一升。刘歆斛式，亦以左耳爲升，然《记》但言三寸，不言其深。且耳深方圜，亦不可知，今无以推求焉。


说汉量


《汉·律历志》、刘徽《九章注》、《隋·律历志》所述刘歆斛法，一龠容一千二百黍，合倍之，十合而升，十升而斗，十斗而斛。是一斛容二百四十万黍，斛积一千六百二十立方寸，即一百六十二万分。《志》称：秬黍一爲一分。今以一百六十二万分之斛，容二百四十万黍，是六百七十五氂爲一黍之位。所以然者，黍体本圆，以方圆同径求之，立方径一分，即十氂，积一千氂。立圆径一分，即十氂，积五百二十三氂六百豪，是一黍尚不及六百七十五氂。但圆物相合，其閒空隙甚多，故综计其数，以六百七十五氂而安一黍也。


一斗之圆幂一百六十二平方寸，实一万六千二百分，以深一寸乘之，即一百六十二立方寸，积十六万二千分。


依刘徽所定圆周密率，径一周三一四一六。其积四而一，则方幂一，圆幂零七八五四。以其率求之，应外方幂二百零六寸二十六分四十三氂二十四豪强，内圆幂一百六十二寸。


晋武库所存刘歆《斛铭》：方尺而圜其外，庣旁九氂五豪。是径一尺四寸三分三氂二豪，〈方尺之弦一尺四寸一分四氂二豪，又加九氂五豪，两面相并，得加一分九氂，故径一尺四寸三分三氂二豪。〉乘方得二百零五寸四十分零六十二氂二十四豪，方幂不足八十五分八十一氂，以求圆幂，不足六十七分三十九氂五十一豪强，于一万六千二百分中约少二百四十分之一，是以祖冲之以爲算术不精也。今试以一尺四寸三分六氂爲径，乘方得二百零六寸二十分零九十六氂，方幂尚少五分四十七氂二十四豪，以求圆幂，尚少四分二十九氂八十豪强，〈以深一寸乘之，圆积尚少四十二分九百八十氂强，其中容穀少六十四黍弱。〉故祖冲之必求一尺四寸三分六氂一豪九秒三忽爲径，然后无朒。今试以其数乘方，得二百零六寸二十六分五十氂零三十三豪有奇，方幂增多七氂零九豪强，以求圆幂，增多五氂五十七豪强，然以祖氏圆率又较刘徽爲密，故增多之数尚小于是。


刘徽圆率，径一周三一四一六。故方幂一，圆幂零七八五四。祖冲之圆率径一周三一四一五九二六五。故方幂一，圆幂零七八五三九八一六二五。今以一尺四寸三分六氂一豪九秒三忽乘方，得平方二百零六寸二十六分五十氂零三十三豪三十二秒四十九忽爲方幂。以圆幂率零七八五三九八一六二五乘之，得平方一百六十二寸零零零一氂七十八豪二十六秒十三忽七十七微七十二纤五四九六二五爲圆幂。是故以深十寸乘之，全斛得积立方一千六百二十寸零零零一分七百八十二氂六百十三豪七百七十七秒二百五十四忽九百六十二微五百纤，尚盈一百六十二万分之一七八二六一三七七七二五四九六二五，于全量二百四十万黍，盈黍二粒三分粒之二弱，是爲最密之数。


案：圆率至刘徽始有定论，至祖冲之益密。自刘徽以往，率亦不同，《宋书·天文志》称：吴时王蕃以爲径一不啻周三，率径四十五，周一百四十二。是则径一周三一五五五不尽也。今依刘歆斛法，以径十四寸三分三氂二豪，幂一百六十二寸求周，得径一周三一五五六强。是王蕃圆率，实本刘歆，而以约率便算者也。刘歆圆周大于刘徽、祖冲之，故依刘、祖之率，则歆斛不满一千六百二十寸。若秦九韶、钱塘谓径一周三一六二有奇，是周又大于刘歆也。


若张衡圆周，又大于秦、钱二率。《开元占经》引祖𣈶《浑天论》云：张衡日月共径，当天周七百三十六分之一、地广二百三十二分之一。案此而论，天周分母，圆周率也。地广分母，圆径率也。以八约之，得周率九十二，径率二十九，其率伤于周多径少，衡之疏也。〈以上祖《论》。〉依其数，以径除周，率径一周三一七二四有奇。〈戴氏依《九章&bull;少广篇》注推校张衡圆率，径一周三四六四三五弱。此则周率过大，恐《九章注》引衡术有误。〉


《九章》之爲量也，以千六百二十立方寸程米一斛。刘歆爲之，而量不能满其寸。虽然，斛斗升合皆圆，圆率苟同，则以十相进，无有所损。吏民之用量也，求十合而升，十升而斗，十斗而斛，则止矣。非曰尺寸之度必合于《九章》也。必求与千六百二十立方寸密合者，非冲之之术，无以定也。


黍稷稻粱之属，大体立圆。而正椭又异，以入量则多空隙，纵横相补，不能同㮣，而盈朒生焉。故古者程米之术，亦得其大齐尔。律管容黍，一器而前后不同。市人之善量者，取米十斗，端手量之，振撼量之，其差率在二升以上。然则刘歆斛法较《九章》程米，一斛之寸，少二百四十分之一，一斛之黍，朒四合二勺稍弱，〈歆斛所朒实止四合二勺稍弱。《九章》刘徽《注》称：王莽铜斛，以徽术计之，于今斛爲容九斗七升四合有奇，此以魏斛莽斛相较，故云然，非以莽斛与眞积一千六百二十寸者相较也。〉固不足论。若以徽率准之，作径一尺四寸三分六氂，一斛之寸，少三千七百七十分之一，一斛之黍，朒二勺三分勺之二弱，弥不足计矣。然冲之必求密合者，非独以《九章》斛法相课，凡斗斛之用，受穀而外，亦以量水，黍有进退，而水无假借也。取同积之方器以注水，则舒促自见矣，岂徒以算术竞胜云尔。

